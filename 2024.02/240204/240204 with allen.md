# 클래스와 구조체의 이해 (85강)

### 객체 지향 프로그래밍

**클래스 → 붕어빵 틀 (틀)**

**객체 → 붕어빵 (실제 데이터)**

**객체 지향 프로그래밍? → 프로그램을 객체들의 모임으로 파악한다**

클래스, 구조체 둘다 메모리에 찍어낸 것을 인스턴스라고 하는데 Swift 에서는 클래스의 인스턴스를 객체(object)라고 한다 (+ 열거형도 인스턴스가 있구나)

## 클래스(class)

### 기본 형태

```swift
// 틀 만들기(클래스 정의?)
class Dog {
    var name = "강아지"
    
    func sit() {
        print("앉았습니다.")
    }
}
// 붕어빵 찍어내기(인스턴스의 생성)
var bori = Dog()

// 속성에 접근
bori.name = "보리"
```

`var name` : 변수 → **속성(property)**

`func sit( )` : 함수 → **메서드(method)**

`var bori` : 변수 → 그냥 변수

`**Dog( )**` : **객체(인스턴스인데 Swift에서는 객체라고 함)**

### 메모리 구조

<aside>
💡 **스택 : 후입선출 → 아래에서부터 차곡차곡 쌓인다 → 값타입
힙 : 비어있는 공간이 있으면 군데군데 저장한다 → 참조타입**

</aside>

- **데이터**
    - `**class Dog { code }` → 붕어빵 틀이 들어감**
        - 메모리 주소를 가진다(ex - x01234)
- **힙**
    - `**Dog( )` → 인스턴스 데이터(붕어빵)가 들어감**
        - **데이터를 여기서 가지고 있음..?**
        - x01234 → 붕어빵 틀의 메모리를 주소를 가지고 있어서 그곳을 가리킨다
        - 자신의 메모리 주소도 가진다 (ex - x08888)
- **스택**
    - `**var bori` → 인스턴스가 저장된 변수는 스택에 저장**
        - x08888 → 인스턴스의 메모리 주소값(힙에 위치한) 을 가지고 있어서 그곳을 가리킨다

## 구조체

### 기본형태

```swift
// 틀 만들기(클래스 정의?)
struct Bird {
    var name = "새"
    
    func fly() {
        print("날아갑니다.")
    }
}

// 붕어빵 찍어내기(인스턴스의 생성)
var aBird = Bird()

// 인스턴스의 속성에 접근
aBird.fly()
```

`Bird( )` → 인스턴스 

### 메모리구조

- 데이터
    - `struct Bird{ code }` → 붕어빵 틀
        - 메모리 주소
- 힙
    - 없음
- 스택
    - `Bird()` ∙ `var aBird` → 구조체에서는 붕어빵이 스택에 저장
        
        ⇒ **함수코드처럼, 생겨났다가 사용하면 사라진다**
        
        - **프로퍼티를 여기에서 가지고 있음**

# 클래스와 구조체의 차이 / 메모리 / 복사 / let 선언 (86강)

# 메모리

### 클래스

```swift
class Person {
    var name = "사람"
}
var p = Person()
var p2 = p
p.name = "브라운" // p.name , p2.name 모두 브라운으로 바뀐다
```

- **클래스의 인스턴스(객체)의 데이터는 힙에 저장된다**
- 변수에 저장하면 그 변수는 스택에 저장된다
- 변수를 복사를 하면 → **메모리 주소값을 복사**해서 넘겨준다 ⇒ **힙의 같은 인스턴스를 여전히 가리키고 있다**
    - 인스턴스를 수정하면, 그 인스턴스 주소값을 가진 모든 변수들의 값이 변경되는거나 마찬가지

### 구조체

```swift
struct Animal {
    var name = "동물"
}

var a = Animal()
var a2 = a
a.name = "강아지" // a.name은 강아지 , a2.name은 동물
```

- 구조체는 인스턴스를 생성하면 스택에 저장됨
- 복사를 하면 **해당 인스턴스를 복사해서(새로만들어서)** 변수에 저장 → 별개의 평행세계 출발

# let

### 클래스

```swift
class PersonClass {
    var name = "사람"
}
let pclass = PersonClass()
pclass.name = "사람1" // 이게 가능하다!!!! 

// let pclass2 = PersonClass()
// pclass = pclass2 // 이거는 안됨 
```

- **데이터를 힙에서 가지고 있으니 pclass 가 바뀌는게 아니고, 클래스의 인스턴스가 변경**
- **pclass 의 메모리주소값이 상수로 여겨져 못 바꾸는 것입니다**

### 구조체

```swift
struct AnimalStruct {
    var name = "동물"
}
let astruct = AnimalStruct()
astruct.name = "동물1" // 구조체는 불가
```

- 인스턴스 자체가 상수로 여겨져서 인스턴스 내의 값을 바꾸지 못함!

## 알아두면 좋은 것

- Int, String 도 다 구조체입니다
    - 그래서 `Int.random(in: 1...10)` 이게 가능… 메소드겠지…? ⇒ 점문법
- 클래스 구조체 선언시, 속성 → 메소드 순서로 작성하세요
- 클래스 내부에는 직접 메소드 실행문이 올 수 없다
    - func code( ) → 이렇게 선언의 형태로 와야한다
    
# 초기화의 의미 (87강)

### 초기화

클래스, 구조체, 열거형의 **인스턴스를 생성하는 것**

어떻게 하는가? → **초기화 메서드(이니셜라이저)를 사용합니다**(기본값 or Optinal의 경우 메서드 사용안해도 됨)

## 초기화 메서드

### 기본형태

```swift
class Dog {
        // 요로케 타입만 선언
    var name: String
    var weight: Int
    
    init(name: String, weight: Int) {
        self.name = name
        self.weight = weight
    }
}
Dog(name: "찰리", weight: 20)
```

- `init( )` 도 당연히 메서드이다, 다만 모양이 조금 특이한
- `self` 는 파라미터의 name과 저장속성의 name 의 이름이 같으니 구분해주는 것
    - 정확히 말하면 `**self` 는 인스턴스**를 지칭

### 중요한 사실

- 인스턴스 생성 과정 : **저장속성**에 대한 초기값을 설정하여 사용가능하게 만드는 것
- **모든 저장 속성을 초기화 해야한다!**
- `Dog.init( )` 원래는 이게 맞지만, 생략도 허용

# 클래스와 구조체 사용의 이유 / 객체지향의 4대 특징 (89강)

### 객체 지향 프로그래밍이 왜 필요한가요?

⇒ **연관성 있는 데이터(상태정보)를 묶음으로 만들어서** 사용하기 위해서

### 클래스 ∙ 구조체 사용 이유 두가지

1. **모델 설계**
    1. DTO(Data transfer Object)
    2. DAO(Data Access Object)
    3. Helper
2. 애플이 설계 해놓은 클래스 ∙ 구조체 잘 사용하려고

### 언제 클래스 언제 구조체?

- 구조체
    - 단순히 캡슐화
    - 참조보다는 복사할 때
- 클래스
    - 상속
    - serialize 전송이나 파일로 저장
- 클래스가 속도가 느리니, 웬만하면 구조체 사용하세용

### 객체 지향의 4대 특징

- **추상화(디자인 관점)**
    - 실체에서 관심있고, 공통적인 특성 뽑아서 하나의 분류로 만드는 것
- **캡슐화(코드레벨)**
    - 연관 있는 속성과 메서드를 하나의 클래스로 묶는다
    - 객체는 하나의 목적을 가진 실체이다
    - 은닉화
- 상속성
    - 재사용, 확장
- 다형성
    - 하나의 객체가 여러가지 타입으로 저장될 수 있다

# 1) 저장 속성 (91강)

### 핵심 : 고유의 메모리 공간을 가진 속성

### 특성

- 초기화시 반드시 값을 가져야 한다
- 메모리
    - 클래스 : 힙
    - 구조체 : 스택

# 1-2) 지연 저장 속성 (Lazy) (92강)

### 기본형태

```swift
struct Bird {
    var name: String
    lazy var weight: Double = 0.2
    
    init(name: String) {
        self.name = name
    }
}

bird.weight // 이 시점에 초기화(메모리 공간 생성)
```

- **초기화를 지연 시키도록 해주는 녀석**
- 인스턴스 초기화 시점의 메모리 공간
    - name 공간 생김
    - ~~weight 공간 안생김~~
- `**bird.weight` 속성에 접근하는 순간**
    - name 공간 생김
    - **weight 공간 생김**

### 왜 사용하나요?

1. **메모리 공간의 낭비를 막기 위해서**
    1. 이미지 같은거…?
2. **지연 저장 속성이 다른 저장 속성을 이용해야 할 때**
    
    ```swift
    class View {
        var a: Int
        
        // 다른 속성을 이용해야할때
        lazy var b: Int = {
            return a * 10
        }()
    }
    ```
    

### 유의할 점

- `lazy let` 은 없어요
- **생성자에서 초기화를 안하니까 반드시 기본값이 필요해요**
